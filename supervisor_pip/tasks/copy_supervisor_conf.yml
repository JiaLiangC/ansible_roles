# edirtor: haifeng
# 2017/01/12


- name: copy supervisor conf file
  template: src={{ item.src }} dest={{ item.dest }} owner={{ item.owner }} group={{ item.group }} mode={{ item.mode }} backup=yes
  with_items:
    - { src: '{{supervisor_src_conf}}', dest: '{{ supervisor_conf_dir }}/', owner: '{{supervisor_run_user}}', group: root, mode: "0644"}
  tags:
   - modify_supervisord_conf
  #notify:
  # - restart supervisord service
- name: create link file
  file: src='{{ supervisor_conf_dir }}/supervisord.conf' dest=/etc/supervisord.conf state=link
  #when: '"/etc/supervisord.conf" is not exists'
  #when: '"/etc/supervisord.conf" is file'
  ignore_errors: true

