- name: cp and unarchive logstash to remote host
  unarchive: src={{ item.src }} dest={{ item.dest }} owner='{{ logstash_run_user }}' group={{ logstash_run_user }} creates={{ item.creates }}
  with_items:
    - { src: '{{logstash_packet}}', dest: '{{logstash_install_dir}}/', creates: '{{ logstash_install_dir }}/{{logstash_dir_name}}', mode: '0755' }

- name: create logstash link file
  file: src={{ item.src }} dest={{item.dest}} owner={{ item.owner }} group={{ item.group }} mode={{ item.mode }} state={{ item.state }}
  with_items:
    - { src: '{{logstash_install_dir }}/{{logstash_dir_name}}', dest: '{{logstash_base_dir}}', owner: root, group: root, mode: 0777, state: link}
