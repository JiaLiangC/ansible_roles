---
#- name: copy filebeat.ini file
#  copy: src={{ item.src }} dest={{ item.dest }} owner={{ item.owner }} group={{ item.group }} mode={{ item.mode }}
#  with_items:
#    - { src: 'filebeat.ini', dest: '{{ supervisor_conf_dir }}/', owner: root, group: root, mode: '0644'}
#  notify:
#    - supervisor update 
#  ignore_errors: true

- name: copy logstash conf file
  copy: src={{ item.src }} dest={{ item.dest }} owner={{ logstash_run_user }} group={{ logstash_run_user }} mode={{ item.mode }}
  with_items:
    - { src: 'jvm.options', dest: '{{logstash_base_dir}}/config/', mode: '0644'}
    - { src: 'logstash.yml', dest: '{{logstash_base_dir}}/config/', mode: '0644'}
    - { src: 'log4j2.properties', dest: '{{logstash_base_dir}}/config/', mode: '0644'}
    - { src: 'pipelines.yml', dest: '{{logstash_base_dir}}/config/', mode: '0644'}

- name: copy logstash env file
  template: src={{ item.src }} dest={{ item.dest }} owner=root group=root mode={{ item.mode }}
  with_items:
    - { src: 'logstash.sh', dest: '/etc/profile.d/', mode: '0644'}
