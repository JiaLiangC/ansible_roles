- name: cp and unarchive filebeat to remote host
  unarchive: src={{ item.src }} dest={{ item.dest }} owner=root group=root creates={{ item.creates }}
  with_items:
    - { src: '{{filebeat_packet}}', dest: '{{filebeat_install_dir}}/', creates: '{{ filebeat_install_dir }}/{{filebeat_dir_name}}', mode: '0755' }

- name: create filebeat link file
  file: src={{ item.src }} dest={{item.dest}} owner={{ item.owner }} group={{ item.group }} mode={{ item.mode }} state={{ item.state }}
  with_items:
    - { src: '{{filebeat_install_dir }}/{{filebeat_dir_name}}', dest: '{{filebeat_base_dir}}', owner: root, group: root, mode: 0777, state: link}
