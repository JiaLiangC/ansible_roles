
- name: create filebeat dir
  file: 
    path: "{{ item.path }}" 
    owner: "{{ filebeat_run_user }}" 
    group: "{{ filebeat_run_user }}" 
    mode: "{{ item.mode }}" 
    state: "{{ item.state }}"
  with_items:
    - { path: "{{filebeat_conf_dir}}", mode: "0755", state: directory }
    - { path: "{{filebeat_data_dir}}",  mode: "0755", state: directory }
    - { path: "{{filebeat_log_dir}}", mode: "0755", state: directory }
    - { path: "{{filebeat_conf_dir}}/inputs.d", mode: "0755", state: directory }
    - { path: "{{filebeat_conf_dir}}/modules.d", mode: "0755", state: directory }

