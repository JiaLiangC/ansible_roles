input{
    kafka{
        bootstrap_servers => "172.16.9.71:9092,172.16.9.72:9092,172.16.9.65:9092"
        group_id => "logstash_rcs2-server-info"
        client_id => "{{item.split('.')[0]}}_{{ansible_hostname.split('.')[0]}}"
        topics => ["rcs2-server-info"]
        consumer_threads => 5
        type => "logstash_rcs2-server-info"
        auto_offset_reset => "earliest"
    }
}

filter {
    json {
        source => "message" 
    }
}


output {
    elasticsearch {
        hosts => ["172.16.10.9:9200", "172.16.10.10:9200", "172.16.10.11:9200"]
        #index => "civp_inlog-%{+YYYY.MM.dd}"
        #index => "%{[fields.log_topics]}-%{+YYYY.MM.dd}"
        index => "rcs2-server-info-%{+YYYY.MM.dd}"
        #document_type => "civp_inlog"
        workers => 1        
	#flush_size => 20000
        #idle_flush_time => 10
        template_overwrite => true
    }
}
