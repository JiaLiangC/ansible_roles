- name: install dependece packet
  yum: name={{ item }} state=latest
  with_items:
    - libevent-devel
    - libevent
    - libevent-headers
    - pcre-devel
    - openssl-devel
    - libxslt-devel
    - libxml2-devel
    - gd-devel
    - perl-ExtUtils-Embed
    - GeoIP-devel
- name: copy boot file
  template: src={{ item.src }} dest={{ item.dest }} owner={{ item.owner }} group={{ item.group }} mode={{ item.mode }}
  with_items:
    - { src: 'nginx.init', dest: '/etc/rc.d/init.d/nginx', owner: root, group: root, mode: '0755' }
- name: add to service list
  shell: '{{ item }}'
  with_items:
    - chkconfig --list | grep -q 'nginx' || chkconfig --add nginx

