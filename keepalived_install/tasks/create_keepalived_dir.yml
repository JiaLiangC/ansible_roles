# edirtor: haifeng
# 2017/01/12

#- name: create keepalived user
#  user: name={{ item.name }} state=present system={{ item.system }}
#  with_items:
#    - { name: '{{ keepalived_run_user }}', system: no ,shell: '/sbin/nologin'}

- name: link /data1 to /data dir
  file: src={{ item.src }} dest={{item.dest}} owner={{ item.owner }} group={{ item.group }} mode={{ item.mode }} state={{ item.state }}
  with_items:
    - { src: /data1, dest: /data, owner: root, group: root, mode: "0777", state: link}
  tags:
    - create_data_soft_link

- name: create keepalived dir
  file: path={{ item.path }} owner={{ item.owner }} group={{ item.group }} mode={{ item.mode }} state={{ item.state }}
  with_items:
    - { path: "{{app_base_dir}}", owner: root, group: root, mode: "0755", state: directory }
    - { path: "{{keepalived_conf_dir}}", owner: root, group: root, mode: "0755", state: directory }
    - { path: "{{keepalived_log_dir}}", owner: '{{ keepalived_run_user }}', group: '{{ keepalived_run_user }}', mode: "0755", state: directory }
    - { path: "{{keepalived_var_dir}}", owner: '{{ keepalived_run_user }}', group: root, mode: "0755", state: directory }
   # - { path: "{{keepalived_data_dir}}", owner: '{{ keepalived_data_user }}', group: root, mode: "0755", state: directory }

