# edirtor: haifeng
# 2019/05/11

- include: install_mysql.yml
  tags:
    - install_mysql

- import_tasks: copy_mysql_conf.yml
  tags:
    - copy_mysql_conf

- include: after_install_operation.yml
  tags:
    - after_install_operation

- include_tasks: cent6_service.yml
  when: ansible_os_family == "RedHat" and ansible_distribution_major_version|int == 6

- include_tasks: cent7_service.yml
  when: ansible_os_family == "RedHat" and ansible_distribution_major_version|int >= 7

- include: create_syncuser.yml
  tags:
    - create_syncuser
  when: mysql_slave_server is defined and mysql_slave_server is not none

#- include: core_argument.yml
- include: sync_to_master.yml
  tags:
    - sync_to_master
  when: mysql_master_server is defined and mysql_master_server is not none
