- name: install anaconda2 depended package
  yum: name={{ item }} state=present
  with_items:
    - zlib-devel
    - bzip2-devel
    - openssl-devel
    - ncurses-devel
    - sqlite-devel
    - readline-devel
    - ncurses-libs
    - pcre-devel
    - curl-devel
    - libcurl-devel
- name: copy anaconda2
  unarchive: src={{ item.src }} dest={{ item.dest }} owner=root group=root creates={{ item.creates }}
  with_items:
    - { src: "{{pack_dir}}/anaconda2-4.3.1-python2.7.13.tgz", dest: '{{install_dir}}/', creates: "{{install_dir}}/{{packet_name}}" }
- name: copy anacnda2 path file
  template: src={{ item.src }} dest={{ item.dest }} owner={{ item.owner }} group={{ item.group }} mode={{ item.mode }}
  with_items:
    - { src: "anaconda2.sh", dest: /etc/profile.d/, owner: root, group: root, mode: 0644}
    - { src: "anaconda2.conf", dest: /etc/ld.so.conf.d/, owner: root, group: root, mode: 0644}
- name: create link file
  file: src="{{install_dir}}/{{packet_name}}" dest=/usr/local/{{packet_name}} state=link
  when: install_dir != '/usr/local'
