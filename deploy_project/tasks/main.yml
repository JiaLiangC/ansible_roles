# edirtor: haifengsss@163.com
# 2017/01/12

- include: create_project_dir.yml
  tags:
    - create_project_dir

- include: get_project_name.yml
  tags:
    - get_project_name

- include: install_project_packet_for_tgz.yml
  tags:
    - install_project_packet
  when: project_packet_type == "tgz" and PACKET_NAME is defined and PACKET_NAME is not skipped

- include: install_project_packet.yml
  tags:
    - install_project_packet
  when: project_packet_type == "jar"

#- include: boot_project_for_{{project_boot_type}}.yml
#  tags:
#    - boot_project
#  when: project_boo_type != "other"

- name: debug var
  debug:
    msg: "project_boot_type: {{project_boot_type}}"

- include: project_packet_build_docker_image.yml
  when: project_boot_type == "k8s" or project_boot_type == "docker"
  tags:
    - project_packet_build_docker_image

- include: boot_project_for_k8s.yml
  tags:
    - boot_project_for_k8s
  when: project_boot_type == "k8s"


- include: boot_project_for_nginx.yml
  when: project_boot_type == "nginx"
  tags:
    - boot_project
- include: boot_project_for_supervisor.yml
  when: project_boot_type == "supervisor"
  tags:
    - boot_project
- include: boot_project_for_systemd.yml
  when: project_boot_type == "systemd"
  tags:
    - boot_project

- include: archive_packet.yml
  tags:
    - archive_packet

